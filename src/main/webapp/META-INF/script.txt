/* 회원 */
CREATE TABLE MEMBER (
	EMAIL NVARCHAR2(20) NOT NULL, /* 이메일 */
	NAME NVARCHAR2(10) NOT NULL, /* 이름 */
	PWD NVARCHAR2(15) NOT NULL, /* 비밀번호 */
	ADR NVARCHAR2(50) NOT NULL /* 주소 */
);

CREATE UNIQUE INDEX PK_MEMBER
	ON MEMBER (
		EMAIL ASC
	);

ALTER TABLE MEMBER
	ADD
		CONSTRAINT PK_MEMBER
		PRIMARY KEY (
			EMAIL
		);

/* 서비스분야 */
CREATE TABLE G_SERVICE (
	S_CODE NUMBER NOT NULL, /* 서비스코드 */
	S_NAME NVARCHAR2(10) NOT NULL /* 서비스이름 */
);

CREATE UNIQUE INDEX PK_G_SERVICE
	ON G_SERVICE (
		S_CODE ASC
	);

ALTER TABLE G_SERVICE
	ADD
		CONSTRAINT PK_G_SERVICE
		PRIMARY KEY (
			S_CODE
		);

/* 요청서 */
CREATE TABLE RQ_FORM (
	NUM NUMBER NOT NULL, /* 요청번호 */
	TITLE NVARCHAR2(20) NOT NULL, /* 요청제목 */
	CONTENT NVARCHAR2(100) NOT NULL, /* 요청내용 */
	WRITEDATE DATE DEFAULT SYSDATE NOT NULL, /* 요청한 날짜 */
	HOPEDATE DATE, /* 수업희망날짜 */
	PHONE NVARCHAR2(20), /* 핸드폰번호 */
	DONE NUMBER DEFAULT 0 NOT NULL, /* 요청완료유무 */
	M_EMAIL NVARCHAR2(20) NOT NULL, /* 요청자이메일 */
	G_EMAIL NVARCHAR2(20) NOT NULL, /* 고수이메일 */
	G_CODE NUMBER DEFAULT 10000 NOT NULL /* 고수확인코드 */
);

CREATE UNIQUE INDEX PK_RQ_FORM
	ON RQ_FORM (
		NUM ASC
	);

ALTER TABLE RQ_FORM
	ADD
		CONSTRAINT PK_RQ_FORM
		PRIMARY KEY (
			NUM
		);

/* 공지사항 게시판 */
CREATE TABLE NOTICE (
	NUM NUMBER NOT NULL, /* 글번호 */
	TITLE NVARCHAR2(20) NOT NULL, /* 글제목 */
	CONTENT NVARCHAR2(100) NOT NULL, /* 글내용 */
	WRITEDATE DATE DEFAULT SYSDATE NOT NULL, /* 작성일 */
	FILENAME NVARCHAR2(20) DEFAULT 0, /* 파일명 */
	G_EMAIL NVARCHAR2(20) NOT NULL, /* 고수이메일 */
	G_CODE NUMBER DEFAULT 10000 NOT NULL /* 고수확인코드 */
);

CREATE UNIQUE INDEX PK_NOTICE
	ON NOTICE (
		NUM ASC
	);

ALTER TABLE NOTICE
	ADD
		CONSTRAINT PK_NOTICE
		PRIMARY KEY (
			NUM
		);

/* 고수가입 */
CREATE TABLE G_REGISTER (
	EMAIL NVARCHAR2(20) NOT NULL, /* 이메일 */
	G_CODE NUMBER DEFAULT 10000 NOT NULL, /* 고수확인코드 */
	PR NVARCHAR2(30), /* 자기소개 */
	D_CODE NUMBER NOT NULL /* 상세서비스코드 */
);

CREATE UNIQUE INDEX PK_G_REGISTER
	ON G_REGISTER (
		EMAIL ASC,
		G_CODE ASC
	);

ALTER TABLE G_REGISTER
	ADD
		CONSTRAINT PK_G_REGISTER
		PRIMARY KEY (
			EMAIL,
			G_CODE
		);

/* 질문답변 게시판 */
CREATE TABLE QNA (
	NUM NUMBER NOT NULL, /* 글번호 */
	TITLE NVARCHAR2(20) NOT NULL, /* 글제목 */
	CONTENT NVARCHAR2(100) NOT NULL, /* 글내용 */
	WRITEDATE DATE DEFAULT SYSDATE NOT NULL, /* 작성일 */
	G_EMAIL NVARCHAR2(20) NOT NULL, /* 고수이메일 */
	G_CODE NUMBER DEFAULT 10000 NOT NULL /* 고수확인코드 */
);

CREATE UNIQUE INDEX PK_QNA
	ON QNA (
		NUM ASC
	);

ALTER TABLE QNA
	ADD
		CONSTRAINT PK_QNA
		PRIMARY KEY (
			NUM
		);

/* 후기 게시판 */
CREATE TABLE REVIEW (
	NUM NUMBER NOT NULL, /* 글번호 */
	CONTENT NVARCHAR2(100) NOT NULL, /* 글내용 */
	WRITEDATE DATE DEFAULT SYSDATE NOT NULL, /* 작성일 */
	M_EMAIL NVARCHAR2(20) NOT NULL, /* 요청자이메일 */
	G_EMAIL NVARCHAR2(20) NOT NULL, /* 고수이메일 */
	G_CODE NUMBER DEFAULT 10000 NOT NULL /* 고수확인코드 */
);

CREATE UNIQUE INDEX PK_REVIEW
	ON REVIEW (
		NUM ASC
	);

ALTER TABLE REVIEW
	ADD
		CONSTRAINT PK_REVIEW
		PRIMARY KEY (
			NUM
		);

/* 기본정보 */
CREATE TABLE G_INFO_BASIC (
	EMAIL NVARCHAR2(20) NOT NULL, /* 이메일 */
	G_CODE NUMBER DEFAULT 10000 NOT NULL, /* 고수확인코드 */
	PAYMENT NVARCHAR2(5) NOT NULL, /* 결재수단 */
	AREA NVARCHAR2(10) NOT NULL, /* 활동지역 */
	HIRE_NUM NUMBER DEFAULT 0 NOT NULL, /* 고용횟수 */
	CALLTIME NVARCHAR2(10) NOT NULL, /* 연락가능시간 */
	PHOTO NVARCHAR2(50) /* 프로필 사진 */
);

CREATE UNIQUE INDEX PK_G_INFO_BASIC
	ON G_INFO_BASIC (
		EMAIL ASC,
		G_CODE ASC
	);

ALTER TABLE G_INFO_BASIC
	ADD
		CONSTRAINT PK_G_INFO_BASIC
		PRIMARY KEY (
			EMAIL,
			G_CODE
		);

/* 추가정보 */
CREATE TABLE G_INFO_ADD (
	EMAIL NVARCHAR2(20) NOT NULL, /* 이메일 */
	G_CODE NUMBER DEFAULT 10000 NOT NULL, /* 고수확인코드 */
	TURN NUMBER NOT NULL, /* 순번 */
	CAREER NVARCHAR2(10), /* 경력 */
	LICENSE NVARCHAR2(50) /* 자격증 */
);

CREATE UNIQUE INDEX PK_G_INFO_ADD
	ON G_INFO_ADD (
		EMAIL ASC,
		G_CODE ASC,
		TURN ASC
	);

ALTER TABLE G_INFO_ADD
	ADD
		CONSTRAINT PK_G_INFO_ADD
		PRIMARY KEY (
			EMAIL,
			G_CODE,
			TURN
		);

/* 상세서비스 */
CREATE TABLE G_DETAIL (
	D_CODE NUMBER NOT NULL, /* 상세서비스코드 */
	D_NAME NVARCHAR2(10) NOT NULL, /* 상세서비스이름 */
	S_CODE NUMBER NOT NULL /* 서비스코드 */
);

CREATE UNIQUE INDEX PK_G_DETAIL
	ON G_DETAIL (
		D_CODE ASC
	);

ALTER TABLE G_DETAIL
	ADD
		CONSTRAINT PK_G_DETAIL
		PRIMARY KEY (
			D_CODE
		);

ALTER TABLE RQ_FORM
	ADD
		CONSTRAINT FK_MEMBER_TO_RQ_FORM
		FOREIGN KEY (
			M_EMAIL
		)
		REFERENCES MEMBER (
			EMAIL
		);

ALTER TABLE RQ_FORM
	ADD
		CONSTRAINT FK_G_REGISTER_TO_RQ_FORM
		FOREIGN KEY (
			G_EMAIL,
			G_CODE
		)
		REFERENCES G_REGISTER (
			EMAIL,
			G_CODE
		);

ALTER TABLE NOTICE
	ADD
		CONSTRAINT FK_G_REGISTER_TO_NOTICE
		FOREIGN KEY (
			G_EMAIL,
			G_CODE
		)
		REFERENCES G_REGISTER (
			EMAIL,
			G_CODE
		);

ALTER TABLE G_REGISTER
	ADD
		CONSTRAINT FK_G_DETAIL_TO_G_REGISTER
		FOREIGN KEY (
			D_CODE
		)
		REFERENCES G_DETAIL (
			D_CODE
		);

ALTER TABLE G_REGISTER
	ADD
		CONSTRAINT FK_MEMBER_TO_G_REGISTER
		FOREIGN KEY (
			EMAIL
		)
		REFERENCES MEMBER (
			EMAIL
		);

ALTER TABLE QNA
	ADD
		CONSTRAINT FK_G_REGISTER_TO_QNA
		FOREIGN KEY (
			G_EMAIL,
			G_CODE
		)
		REFERENCES G_REGISTER (
			EMAIL,
			G_CODE
		);

ALTER TABLE REVIEW
	ADD
		CONSTRAINT FK_MEMBER_TO_REVIEW
		FOREIGN KEY (
			M_EMAIL
		)
		REFERENCES MEMBER (
			EMAIL
		);

ALTER TABLE REVIEW
	ADD
		CONSTRAINT FK_G_REGISTER_TO_REVIEW
		FOREIGN KEY (
			G_EMAIL,
			G_CODE
		)
		REFERENCES G_REGISTER (
			EMAIL,
			G_CODE
		);

ALTER TABLE G_INFO_BASIC
	ADD
		CONSTRAINT FK_G_REGISTER_TO_G_INFO_BASIC
		FOREIGN KEY (
			EMAIL,
			G_CODE
		)
		REFERENCES G_REGISTER (
			EMAIL,
			G_CODE
		);

ALTER TABLE G_INFO_ADD
	ADD
		CONSTRAINT FK_G_REGISTER_TO_G_INFO_ADD
		FOREIGN KEY (
			EMAIL,
			G_CODE
		)
		REFERENCES G_REGISTER (
			EMAIL,
			G_CODE
		);

ALTER TABLE G_DETAIL
	ADD
		CONSTRAINT FK_G_SERVICE_TO_G_DETAIL
		FOREIGN KEY (
			S_CODE
		)
		REFERENCES G_SERVICE (
			S_CODE
		);


/*시퀀스*/
CREATE SEQUENCE NO_INFO_ADD
START WITH 1
INCREMENT BY 1 ;

CREATE SEQUENCE NOTICE_NUM
START WITH 1
INCREMENT BY 1 ;

CREATE SEQUENCE QNA_NUM
START WITH 1
INCREMENT BY 1 ;

CREATE SEQUENCE REVIEW_NUM
START WITH 1
INCREMENT BY 1 ;

CREATE SEQUENCE RQNUM
START WITH 1
INCREMENT BY 1 ;


/*기본데이터*/
insert into G_SERVICE values (100, '코딩');
insert into G_SERVICE values (200, '보컬');
insert into G_SERVICE values (300, '운동');
insert into G_SERVICE values (400, '영어');
insert into G_SERVICE values (500, '댄스');
insert into G_SERVICE values (600, '요리');

commit;
select * from G_SERVICE;

insert into G_DETAIL values (101, '프론트', 100);
insert into G_DETAIL values (102, '백앤드', 100);
insert into G_DETAIL values (201, '가요', 200);
insert into G_DETAIL values (202, '팝', 200);
insert into G_DETAIL values (301, 'PT', 300);
insert into G_DETAIL values (302, '유산소', 300);
insert into G_DETAIL values (401, '토익', 400);
insert into G_DETAIL values (402, '회화', 400);
insert into G_DETAIL values (501, '스트릿', 500);
insert into G_DETAIL values (502, '폴', 500);
insert into G_DETAIL values (601, '한식', 600);
insert into G_DETAIL values (602, '양식', 600);

commit;
select * from G_DETAIL;